<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/test11.css">
    <title>Document</title>

</head>
<body>
        
    
    <div class="liaotian">
        <ul></ul>
    </div>
    <div class="bottom-box">
      <div class="text"><textarea placeholder="告诉我你想知道什么"></textarea>
    <button onclick="getValue()"><svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 16c-.595 0-1.077-.462-1.077-1.032V1.032C5.923.462 6.405 0 7 0s1.077.462 1.077 1.032v13.936C8.077 15.538 7.595 16 7 16z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M.315 7.44a1.002 1.002 0 0 1 0-1.46L6.238.302a1.11 1.11 0 0 1 1.523 0c.421.403.421 1.057 0 1.46L1.838 7.44a1.11 1.11 0 0 1-1.523 0z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M13.685 7.44a1.11 1.11 0 0 1-1.523 0L6.238 1.762a1.002 1.002 0 0 1 0-1.46 1.11 1.11 0 0 1 1.523 0l5.924 5.678c.42.403.42 1.056 0 1.46z" fill="currentColor"></path></svg></button></div>
    </div>
</body>
<script>
  var ul=document.querySelector('.liaotian ul')
  var text=document.querySelector('textarea')
    function getValue(){
        var value=document.querySelector('textarea').value
        var div=document.querySelector('.liaotian')
        const url = 'https://api.siliconflow.cn/v1/chat/completions';
        const apiKey = 'sk-epttdgplwzbhjcyeqioommvxzpxarpooxpyvsisyrtjbpthv'; 
        const requestData = {
            model: "Qwen/QwQ-32B",
            messages: [{ role: "user", content: `${value}` }], 
            max_tokens: 1000,
            temperature: 0.7
        };
        ul.innerHTML+=`
        <li class="user"><span>${value}</span></pli>
        `
        text.value=''
        fetch(url, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${apiKey}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(requestData)
})
  .then(async (response) => {
    if (!response.ok) {
      const errorData = await response.json(); 
      throw new Error(`HTTP error! status: ${response.status}, details: ${JSON.stringify(errorData)}`);
    }
    return response.json();
  })
  .then(data => {
    console.log('Success:', data);
        ul.innerHTML+=`
        <li class="Ai">
          ${data.choices[0].message.content}</li>
        `
        console.log(data.choices[0].message.content)
  })
  .catch(error => {
    console.error('Full Error:', error);
  });
       
   

}
</script>
<script src="./js/reset.js"></script>
</html>